import{f as lt,a as ut}from"../chunks/2nd4cOeL.js";import{i as re}from"../chunks/BorxfLZj.js";import{o as ie}from"../chunks/BIKdY9KO.js";import{c as yt,b as me,d as wt,h as tt,g as de,f as ge,P,a4 as pe,r as ve,i as ye,j as jt,s as _t,e as ct,C as we,aM as _e,ax as qt,k as Me,aR as Q,n as Nt,q as be,ap as Kt,Q as Z,aK as Xt,G as ke,aS as xe,aT as ze,aU as Se,l as oe,p as ae,aV as Mt,a as Te,aJ as Ee,m as Ne,I as ue,J as Ae,R as nt,O as et,M as se,ai as ot,aW as Ie,$ as De,S as G,T as j,K as bt}from"../chunks/BGMCiVOv.js";import{s as kt}from"../chunks/BcTKq6Ah.js";import{h as Pe}from"../chunks/BDnjr7Vn.js";import{s as Re}from"../chunks/Cbx9bKlz.js";import{p as ft,b as At}from"../chunks/CyiI0agj.js";import{b as Ce}from"../chunks/l_RTz4ho.js";import{S as Lt,r as $e,c as Ye,i as It,a as Ut,b as Xe,d as Bt,e as Fe,f as Ft,T as xt,g as zt}from"../chunks/CqFyTwbj.js";import"../chunks/CXgBHret.js";import{g as Oe}from"../chunks/CZNzIhp9.js";function St(t,e){return e}function Ve(t,e,n){for(var r=[],s=e.length,l,a=e.length,u=0;u<s;u++){let m=e[u];ae(m,()=>{if(l){if(l.pending.delete(m),l.done.add(m),l.pending.size===0){var v=t.outrogroups;Dt(Xt(l.done)),v.delete(l),v.size===0&&(t.outrogroups=null)}}else a-=1},!1)}if(a===0){var h=r.length===0&&n!==null;if(h){var i=n,y=i.parentNode;Ee(y),y.append(i),t.items.clear()}Dt(e,!h)}else l={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(l)}function Dt(t,e=!0){for(var n=0;n<t.length;n++)Ne(t[n],e)}var Gt;function Tt(t,e,n,r,s,l=null){var a=t,u=new Map;{var h=t;a=tt?wt(de(h)):h.appendChild(yt())}tt&&ge();var i=null,y=pe(()=>{var E=n();return ke(E)?E:E==null?[]:Xt(E)}),m,v=!0;function T(){N.fallback=i,je(N,m,a,e,r),i!==null&&(m.length===0?(i.f&Q)===0?oe(i):(i.f^=Q,st(i,null,a)):ae(i,()=>{i=null}))}var p=me(()=>{m=P(y);var E=m.length;let d=!1;if(tt){var z=ve(a)===ye;z!==(E===0)&&(a=jt(),wt(a),_t(!1),d=!0)}for(var x=new Set,A=Me,M=be(),I=0;I<E;I+=1){tt&&ct.nodeType===we&&ct.data===_e&&(a=ct,d=!0,_t(!1));var C=m[I],R=r(C,I),$=v?null:u.get(R);$?($.v&&qt($.v,C),$.i&&qt($.i,I),M&&A.skipped_effects.delete($.e)):($=qe(u,v?a:Gt??=yt(),C,R,I,s,e,n),v||($.e.f|=Q),u.set(R,$)),x.add(R)}if(E===0&&l&&!i&&(v?i=Nt(()=>l(a)):(i=Nt(()=>l(Gt??=yt())),i.f|=Q)),tt&&E>0&&wt(jt()),!v)if(M){for(const[X,k]of u)x.has(X)||A.skipped_effects.add(k.e);A.oncommit(T),A.ondiscard(()=>{})}else T();d&&_t(!0),P(y)}),N={effect:p,items:u,outrogroups:null,fallback:i};v=!1,tt&&(a=ct)}function je(t,e,n,r,s){var l=e.length,a=t.items,u=t.effect.first,h,i=null,y=[],m=[],v,T,p,N;for(N=0;N<l;N+=1){if(v=e[N],T=s(v,N),p=a.get(T).e,t.outrogroups!==null)for(const R of t.outrogroups)R.pending.delete(p),R.done.delete(p);if((p.f&Q)!==0)if(p.f^=Q,p===u)st(p,null,n);else{var E=i?i.next:u;p===t.effect.last&&(t.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),H(t,i,p),H(t,p,E),st(p,E,n),i=p,y=[],m=[],u=i.next;continue}if((p.f&Mt)!==0&&oe(p),p!==u){if(h!==void 0&&h.has(p)){if(y.length<m.length){var d=m[0],z;i=d.prev;var x=y[0],A=y[y.length-1];for(z=0;z<y.length;z+=1)st(y[z],d,n);for(z=0;z<m.length;z+=1)h.delete(m[z]);H(t,x.prev,A.next),H(t,i,x),H(t,A,d),u=d,i=A,N-=1,y=[],m=[]}else h.delete(p),st(p,u,n),H(t,p.prev,p.next),H(t,p,i===null?t.effect.first:i.next),H(t,i,p),i=p;continue}for(y=[],m=[];u!==null&&u!==p;)(h??=new Set).add(u),m.push(u),u=u.next;if(u===null)continue}(p.f&Q)===0&&y.push(p),i=p,u=p.next}if(t.outrogroups!==null){for(const R of t.outrogroups)R.pending.size===0&&(Dt(Xt(R.done)),t.outrogroups?.delete(R));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||h!==void 0){var M=[];if(h!==void 0)for(p of h)(p.f&Mt)===0&&M.push(p);for(;u!==null;)(u.f&Mt)===0&&u!==t.fallback&&M.push(u),u=u.next;var I=M.length;if(I>0){var C=l===0?n:null;Ve(t,M,C)}}}function qe(t,e,n,r,s,l,a,u){var h=(a&xe)!==0?(a&ze)===0?Z(n,!1,!1):Kt(n):null,i=(a&Se)!==0?Kt(s):null;return{v:h,i,e:Nt(()=>(l(e,h??n,i??s,u),()=>{t.delete(r)}))}}function st(t,e,n){if(t.nodes)for(var r=t.nodes.start,s=t.nodes.end,l=e&&(e.f&Q)===0?e.nodes.start:n;r!==null;){var a=Te(r);if(l.before(r),r===s)return;r=a}}function H(t,e,n){e===null?t.effect.first=n:e.next=n,n===null?t.effect.last=e:n.prev=e}const Ke=!0,cr=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ke},Symbol.toStringTag,{value:"Module"}));function dt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Le(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function le(t){let e,n,r;t.length!==2?(e=dt,n=(u,h)=>dt(t(u),h),r=(u,h)=>t(u)-h):(e=t===dt||t===Le?t:Ue,n=t,r=t);function s(u,h,i=0,y=u.length){if(i<y){if(e(h,h)!==0)return y;do{const m=i+y>>>1;n(u[m],h)<0?i=m+1:y=m}while(i<y)}return i}function l(u,h,i=0,y=u.length){if(i<y){if(e(h,h)!==0)return y;do{const m=i+y>>>1;n(u[m],h)<=0?i=m+1:y=m}while(i<y)}return i}function a(u,h,i=0,y=u.length){const m=s(u,h,i,y-1);return m>i&&r(u[m-1],h)>-r(u[m],h)?m-1:m}return{left:s,center:a,right:l}}function Ue(){return 0}function Be(t){return t===null?NaN:+t}const Ge=le(dt),He=Ge.right;le(Be).center;const Qe=Math.sqrt(50),We=Math.sqrt(10),Ze=Math.sqrt(2);function gt(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),l=r/Math.pow(10,s),a=l>=Qe?10:l>=We?5:l>=Ze?2:1;let u,h,i;return s<0?(i=Math.pow(10,-s)/a,u=Math.round(t*i),h=Math.round(e*i),u/i<t&&++u,h/i>e&&--h,i=-i):(i=Math.pow(10,s)*a,u=Math.round(t/i),h=Math.round(e/i),u*i<t&&++u,h*i>e&&--h),h<u&&.5<=n&&n<2?gt(t,e,n*2):[u,h,i]}function Je(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,l,a]=r?gt(e,t,n):gt(t,e,n);if(!(l>=s))return[];const u=l-s+1,h=new Array(u);if(r)if(a<0)for(let i=0;i<u;++i)h[i]=(l-i)/-a;else for(let i=0;i<u;++i)h[i]=(l-i)*a;else if(a<0)for(let i=0;i<u;++i)h[i]=(s+i)/-a;else for(let i=0;i<u;++i)h[i]=(s+i)*a;return h}function Pt(t,e,n){return e=+e,t=+t,n=+n,gt(t,e,n)[2]}function tn(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?Pt(e,t,n):Pt(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function q(t){return typeof t=="string"?new Lt([[document.querySelector(t)]],[document.documentElement]):new Lt([[t]],$e)}function en(t){let e;for(;e=t.sourceEvent;)t=e;return t}function W(t,e){if(t=en(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const Rt={capture:!0,passive:!1};function Ct(t){t.preventDefault(),t.stopImmediatePropagation()}function nn(t){var e=t.document.documentElement,n=q(t).on("dragstart.drag",Ct,Rt);"onselectstart"in e?n.on("selectstart.drag",Ct,Rt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function rn(t,e){var n=t.document.documentElement,r=q(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ct,Rt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function on(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(l){for(s=0;s<n;++s)r[s]=t[s]*(1-l)+e[s]*l;return r}}function an(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function un(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),l=new Array(n),a;for(a=0;a<r;++a)s[a]=Ot(t[a],e[a]);for(;a<n;++a)l[a]=e[a];return function(u){for(a=0;a<r;++a)l[a]=s[a](u);return l}}function sn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ln(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Ot(t[s],e[s]):r[s]=e[s];return function(l){for(s in n)r[s]=n[s](l);return r}}function Ot(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ye(e):(n==="number"?It:n==="string"?(r=Bt(e))?(e=r,Ut):Xe:e instanceof Bt?Ut:e instanceof Date?sn:an(e)?on:Array.isArray(e)?un:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ln:It)(t,e)}function cn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var fn=1e-12;function Ht(t){return((t=Math.exp(t))+1/t)/2}function hn(t){return((t=Math.exp(t))-1/t)/2}function mn(t){return((t=Math.exp(2*t))-1)/(t+1)}const dn=(function t(e,n,r){function s(l,a){var u=l[0],h=l[1],i=l[2],y=a[0],m=a[1],v=a[2],T=y-u,p=m-h,N=T*T+p*p,E,d;if(N<fn)d=Math.log(v/i)/e,E=function(C){return[u+C*T,h+C*p,i*Math.exp(e*C*d)]};else{var z=Math.sqrt(N),x=(v*v-i*i+r*N)/(2*i*n*z),A=(v*v-i*i-r*N)/(2*v*n*z),M=Math.log(Math.sqrt(x*x+1)-x),I=Math.log(Math.sqrt(A*A+1)-A);d=(I-M)/e,E=function(C){var R=C*d,$=Ht(M),X=i/(n*z)*($*mn(e*R+M)-hn(M));return[u+X*T,h+X*p,i*$/Ht(e*R+M)]}}return E.duration=d*1e3*e/Math.SQRT2,E}return s.rho=function(l){var a=Math.max(.001,+l),u=a*a,h=u*u;return t(a,u,h)},s})(Math.SQRT2,2,4);function gn(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function pt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function it(t){return t=pt(Math.abs(t)),t?t[1]:NaN}function pn(t,e){return function(n,r){for(var s=n.length,l=[],a=0,u=t[0],h=0;s>0&&u>0&&(h+u+1>r&&(u=Math.max(1,r-h)),l.push(n.substring(s-=u,s+u)),!((h+=u+1)>r));)u=t[a=(a+1)%t.length];return l.reverse().join(e)}}function vn(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var yn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vt(t){if(!(e=yn.exec(t)))throw new Error("invalid format: "+t);var e;return new Vt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}vt.prototype=Vt.prototype;function Vt(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Vt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wn(t){t:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var ce;function _n(t,e){var n=pt(t,e);if(!n)return t+"";var r=n[0],s=n[1],l=s-(ce=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=r.length;return l===a?r:l>a?r+new Array(l-a+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+pt(t,Math.max(0,e+l-1))[0]}function Qt(t,e){var n=pt(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const Wt={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:gn,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Qt(t*100,e),r:Qt,s:_n,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Zt(t){return t}var Jt=Array.prototype.map,te=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Mn(t){var e=t.grouping===void 0||t.thousands===void 0?Zt:pn(Jt.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?Zt:vn(Jt.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",h=t.nan===void 0?"NaN":t.nan+"";function i(m){m=vt(m);var v=m.fill,T=m.align,p=m.sign,N=m.symbol,E=m.zero,d=m.width,z=m.comma,x=m.precision,A=m.trim,M=m.type;M==="n"?(z=!0,M="g"):Wt[M]||(x===void 0&&(x=12),A=!0,M="g"),(E||v==="0"&&T==="=")&&(E=!0,v="0",T="=");var I=N==="$"?n:N==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",C=N==="$"?r:/[%p]/.test(M)?a:"",R=Wt[M],$=/[defgprs%]/.test(M);x=x===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function X(k){var U=I,F=C,o,w,c;if(M==="c")F=R(k)+F,k="";else{k=+k;var _=k<0||1/k<0;if(k=isNaN(k)?h:R(Math.abs(k),x),A&&(k=wn(k)),_&&+k==0&&p!=="+"&&(_=!1),U=(_?p==="("?p:u:p==="-"||p==="("?"":p)+U,F=(M==="s"?te[8+ce/3]:"")+F+(_&&p==="("?")":""),$){for(o=-1,w=k.length;++o<w;)if(c=k.charCodeAt(o),48>c||c>57){F=(c===46?s+k.slice(o+1):k.slice(o))+F,k=k.slice(0,o);break}}}z&&!E&&(k=e(k,1/0));var f=U.length+k.length+F.length,g=f<d?new Array(d-f+1).join(v):"";switch(z&&E&&(k=e(g+k,g.length?d-F.length:1/0),g=""),T){case"<":k=U+k+F+g;break;case"=":k=U+g+k+F;break;case"^":k=g.slice(0,f=g.length>>1)+U+k+F+g.slice(f);break;default:k=g+U+k+F;break}return l(k)}return X.toString=function(){return m+""},X}function y(m,v){var T=i((m=vt(m),m.type="f",m)),p=Math.max(-8,Math.min(8,Math.floor(it(v)/3)))*3,N=Math.pow(10,-p),E=te[8+p/3];return function(d){return T(N*d)+E}}return{format:i,formatPrefix:y}}var ht,fe,he;bn({thousands:",",grouping:[3],currency:["$",""]});function bn(t){return ht=Mn(t),fe=ht.format,he=ht.formatPrefix,ht}function kn(t){return Math.max(0,-it(Math.abs(t)))}function xn(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(it(e)/3)))*3-it(Math.abs(t)))}function zn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,it(e)-it(t))+1}function Sn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Tn(t){return function(){return t}}function En(t){return+t}var ee=[0,1];function rt(t){return t}function $t(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Tn(isNaN(e)?NaN:.5)}function Nn(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function An(t,e,n){var r=t[0],s=t[1],l=e[0],a=e[1];return s<r?(r=$t(s,r),l=n(a,l)):(r=$t(r,s),l=n(l,a)),function(u){return l(r(u))}}function In(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),l=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)s[a]=$t(t[a],t[a+1]),l[a]=n(e[a],e[a+1]);return function(u){var h=He(t,u,1,r)-1;return l[h](s[h](u))}}function Dn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Pn(){var t=ee,e=ee,n=Ot,r,s,l,a=rt,u,h,i;function y(){var v=Math.min(t.length,e.length);return a!==rt&&(a=Nn(t[0],t[v-1])),u=v>2?In:An,h=i=null,m}function m(v){return v==null||isNaN(v=+v)?l:(h||(h=u(t.map(r),e,n)))(r(a(v)))}return m.invert=function(v){return a(s((i||(i=u(e,t.map(r),It)))(v)))},m.domain=function(v){return arguments.length?(t=Array.from(v,En),y()):t.slice()},m.range=function(v){return arguments.length?(e=Array.from(v),y()):e.slice()},m.rangeRound=function(v){return e=Array.from(v),n=cn,y()},m.clamp=function(v){return arguments.length?(a=v?!0:rt,y()):a!==rt},m.interpolate=function(v){return arguments.length?(n=v,y()):n},m.unknown=function(v){return arguments.length?(l=v,m):l},function(v,T){return r=v,s=T,y()}}function Rn(){return Pn()(rt,rt)}function Cn(t,e,n,r){var s=tn(t,e,n),l;switch(r=vt(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(l=xn(s,a))&&(r.precision=l),he(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=zn(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=kn(s))&&(r.precision=l-(r.type==="%")*2);break}}return fe(r)}function $n(t){var e=t.domain;return t.ticks=function(n){var r=e();return Je(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return Cn(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,l=r.length-1,a=r[s],u=r[l],h,i,y=10;for(u<a&&(i=a,a=u,u=i,i=s,s=l,l=i);y-- >0;){if(i=Pt(a,u,n),i===h)return r[s]=a,r[l]=u,e(r);if(i>0)a=Math.floor(a/i)*i,u=Math.ceil(u/i)*i;else if(i<0)a=Math.ceil(a*i)/i,u=Math.floor(u*i)/i;else break;h=i}return t},t}function Yt(){var t=Rn();return t.copy=function(){return Dn(t,Yt())},Sn.apply(t,arguments),$n(t)}function Yn(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const Xn=Yn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),mt=t=>()=>t;function Fn(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Et(t){t.stopImmediatePropagation()}function at(t){t.preventDefault(),t.stopImmediatePropagation()}function On(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Vn(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ne(){return this.__zoom||Ft}function jn(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function qn(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kn(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),a>l?(l+a)/2:Math.min(0,l)||Math.max(0,a))}function Ln(){var t=On,e=Vn,n=Kn,r=jn,s=qn,l=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],u=250,h=dn,i=Fe("start","zoom","end"),y,m,v,T=500,p=150,N=0,E=10;function d(o){o.property("__zoom",ne).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",X).filter(s).on("touchstart.zoom",k).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.transform=function(o,w,c,_){var f=o.selection?o.selection():o;f.property("__zoom",ne),o!==f?M(o,w,c,_):f.interrupt().each(function(){I(this,arguments).event(_).start().zoom(null,typeof w=="function"?w.apply(this,arguments):w).end()})},d.scaleBy=function(o,w,c,_){d.scaleTo(o,function(){var f=this.__zoom.k,g=typeof w=="function"?w.apply(this,arguments):w;return f*g},c,_)},d.scaleTo=function(o,w,c,_){d.transform(o,function(){var f=e.apply(this,arguments),g=this.__zoom,b=c==null?A(f):typeof c=="function"?c.apply(this,arguments):c,S=g.invert(b),D=typeof w=="function"?w.apply(this,arguments):w;return n(x(z(g,D),b,S),f,a)},c,_)},d.translateBy=function(o,w,c,_){d.transform(o,function(){return n(this.__zoom.translate(typeof w=="function"?w.apply(this,arguments):w,typeof c=="function"?c.apply(this,arguments):c),e.apply(this,arguments),a)},null,_)},d.translateTo=function(o,w,c,_,f){d.transform(o,function(){var g=e.apply(this,arguments),b=this.__zoom,S=_==null?A(g):typeof _=="function"?_.apply(this,arguments):_;return n(Ft.translate(S[0],S[1]).scale(b.k).translate(typeof w=="function"?-w.apply(this,arguments):-w,typeof c=="function"?-c.apply(this,arguments):-c),g,a)},_,f)};function z(o,w){return w=Math.max(l[0],Math.min(l[1],w)),w===o.k?o:new xt(w,o.x,o.y)}function x(o,w,c){var _=w[0]-c[0]*o.k,f=w[1]-c[1]*o.k;return _===o.x&&f===o.y?o:new xt(o.k,_,f)}function A(o){return[(+o[0][0]+ +o[1][0])/2,(+o[0][1]+ +o[1][1])/2]}function M(o,w,c,_){o.on("start.zoom",function(){I(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(_).end()}).tween("zoom",function(){var f=this,g=arguments,b=I(f,g).event(_),S=e.apply(f,g),D=c==null?A(S):typeof c=="function"?c.apply(f,g):c,K=Math.max(S[1][0]-S[0][0],S[1][1]-S[0][1]),Y=f.__zoom,V=typeof w=="function"?w.apply(f,g):w,B=h(Y.invert(D).concat(K/Y.k),V.invert(D).concat(K/V.k));return function(O){if(O===1)O=V;else{var L=B(O),J=K/L[2];O=new xt(J,D[0]-L[0]*J,D[1]-L[1]*J)}b.zoom(null,O)}})}function I(o,w,c){return!c&&o.__zooming||new C(o,w)}function C(o,w){this.that=o,this.args=w,this.active=0,this.sourceEvent=null,this.extent=e.apply(o,w),this.taps=0}C.prototype={event:function(o){return o&&(this.sourceEvent=o),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(o,w){return this.mouse&&o!=="mouse"&&(this.mouse[1]=w.invert(this.mouse[0])),this.touch0&&o!=="touch"&&(this.touch0[1]=w.invert(this.touch0[0])),this.touch1&&o!=="touch"&&(this.touch1[1]=w.invert(this.touch1[0])),this.that.__zoom=w,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(o){var w=q(this.that).datum();i.call(o,this.that,new Fn(o,{sourceEvent:this.sourceEvent,target:d,transform:this.that.__zoom,dispatch:i}),w)}};function R(o,...w){if(!t.apply(this,arguments))return;var c=I(this,w).event(o),_=this.__zoom,f=Math.max(l[0],Math.min(l[1],_.k*Math.pow(2,r.apply(this,arguments)))),g=W(o);if(c.wheel)(c.mouse[0][0]!==g[0]||c.mouse[0][1]!==g[1])&&(c.mouse[1]=_.invert(c.mouse[0]=g)),clearTimeout(c.wheel);else{if(_.k===f)return;c.mouse=[g,_.invert(g)],zt(this),c.start()}at(o),c.wheel=setTimeout(b,p),c.zoom("mouse",n(x(z(_,f),c.mouse[0],c.mouse[1]),c.extent,a));function b(){c.wheel=null,c.end()}}function $(o,...w){if(v||!t.apply(this,arguments))return;var c=o.currentTarget,_=I(this,w,!0).event(o),f=q(o.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",K,!0),g=W(o,c),b=o.clientX,S=o.clientY;nn(o.view),Et(o),_.mouse=[g,this.__zoom.invert(g)],zt(this),_.start();function D(Y){if(at(Y),!_.moved){var V=Y.clientX-b,B=Y.clientY-S;_.moved=V*V+B*B>N}_.event(Y).zoom("mouse",n(x(_.that.__zoom,_.mouse[0]=W(Y,c),_.mouse[1]),_.extent,a))}function K(Y){f.on("mousemove.zoom mouseup.zoom",null),rn(Y.view,_.moved),at(Y),_.event(Y).end()}}function X(o,...w){if(t.apply(this,arguments)){var c=this.__zoom,_=W(o.changedTouches?o.changedTouches[0]:o,this),f=c.invert(_),g=c.k*(o.shiftKey?.5:2),b=n(x(z(c,g),_,f),e.apply(this,w),a);at(o),u>0?q(this).transition().duration(u).call(M,b,_,o):q(this).call(d.transform,b,_,o)}}function k(o,...w){if(t.apply(this,arguments)){var c=o.touches,_=c.length,f=I(this,w,o.changedTouches.length===_).event(o),g,b,S,D;for(Et(o),b=0;b<_;++b)S=c[b],D=W(S,this),D=[D,this.__zoom.invert(D),S.identifier],f.touch0?!f.touch1&&f.touch0[2]!==D[2]&&(f.touch1=D,f.taps=0):(f.touch0=D,g=!0,f.taps=1+!!y);y&&(y=clearTimeout(y)),g&&(f.taps<2&&(m=D[0],y=setTimeout(function(){y=null},T)),zt(this),f.start())}}function U(o,...w){if(this.__zooming){var c=I(this,w).event(o),_=o.changedTouches,f=_.length,g,b,S,D;for(at(o),g=0;g<f;++g)b=_[g],S=W(b,this),c.touch0&&c.touch0[2]===b.identifier?c.touch0[0]=S:c.touch1&&c.touch1[2]===b.identifier&&(c.touch1[0]=S);if(b=c.that.__zoom,c.touch1){var K=c.touch0[0],Y=c.touch0[1],V=c.touch1[0],B=c.touch1[1],O=(O=V[0]-K[0])*O+(O=V[1]-K[1])*O,L=(L=B[0]-Y[0])*L+(L=B[1]-Y[1])*L;b=z(b,Math.sqrt(O/L)),S=[(K[0]+V[0])/2,(K[1]+V[1])/2],D=[(Y[0]+B[0])/2,(Y[1]+B[1])/2]}else if(c.touch0)S=c.touch0[0],D=c.touch0[1];else return;c.zoom("touch",n(x(b,S,D),c.extent,a))}}function F(o,...w){if(this.__zooming){var c=I(this,w).event(o),_=o.changedTouches,f=_.length,g,b;for(Et(o),v&&clearTimeout(v),v=setTimeout(function(){v=null},T),g=0;g<f;++g)b=_[g],c.touch0&&c.touch0[2]===b.identifier?delete c.touch0:c.touch1&&c.touch1[2]===b.identifier&&delete c.touch1;if(c.touch1&&!c.touch0&&(c.touch0=c.touch1,delete c.touch1),c.touch0)c.touch0[1]=this.__zoom.invert(c.touch0[0]);else if(c.end(),c.taps===2&&(b=W(b,this),Math.hypot(m[0]-b[0],m[1]-b[1])<E)){var S=q(this).on("dblclick.zoom");S&&S.apply(this,arguments)}}}return d.wheelDelta=function(o){return arguments.length?(r=typeof o=="function"?o:mt(+o),d):r},d.filter=function(o){return arguments.length?(t=typeof o=="function"?o:mt(!!o),d):t},d.touchable=function(o){return arguments.length?(s=typeof o=="function"?o:mt(!!o),d):s},d.extent=function(o){return arguments.length?(e=typeof o=="function"?o:mt([[+o[0][0],+o[0][1]],[+o[1][0],+o[1][1]]]),d):e},d.scaleExtent=function(o){return arguments.length?(l[0]=+o[0],l[1]=+o[1],d):[l[0],l[1]]},d.translateExtent=function(o){return arguments.length?(a[0][0]=+o[0][0],a[1][0]=+o[1][0],a[0][1]=+o[0][1],a[1][1]=+o[1][1],d):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},d.constrain=function(o){return arguments.length?(n=o,d):n},d.duration=function(o){return arguments.length?(u=+o,d):u},d.interpolate=function(o){return arguments.length?(h=o,d):h},d.on=function(){var o=i.on.apply(i,arguments);return o===i?d:o},d.clickDistance=function(o){return arguments.length?(N=(o=+o)*o,d):Math.sqrt(N)},d.tapDistance=function(o){return arguments.length?(E=+o,d):E},d}var Un=lt('<svg tabindex="0"></svg> <div class="tooltip svelte-bz4dsi"></div>',1);function Bn(t,e){ue(e,!1);let n=ft(e,"dataUrl",12),r=ft(e,"width",8,800),s=ft(e,"height",8,600),l=ft(e,"onSelect",8,()=>{}),a=Z(),u=Z(),h=[],i=new Set,y=Ft,m,v,T=null,p=!1;ie(async()=>{h=await(await fetch(n())).json(),E()});const N=async M=>{n(M),h=await(await fetch(n())).json(),E()};function E(){const M=q(P(a)).attr("width",r()).attr("height",s()).style("user-select","none"),I=Yt().domain([0,1]).range([40,r()-40]),C=Yt().domain([0,1]).range([s()-40,40]),R=M.append("g"),$=Ln().filter(f=>f.type==="wheel"||f.altKey).scaleExtent([.5,10]).on("zoom",f=>{y=f.transform,R.attr("transform",y)});M.call($);const X=R.selectAll("circle").data(h).join("circle").attr("cx",f=>I(f.x)).attr("cy",f=>C(f.y)).attr("r",f=>4+f.size*10).attr("fill",f=>f.cluster===-1?"#999":Xn[f.cluster%10]).attr("stroke","#000").attr("stroke-width",.5).style("cursor","pointer").on("click",(f,g)=>{f.stopPropagation(),!p&&(f.shiftKey||o(),U(g,f.currentTarget),l()([...i]))}).on("mouseenter",w).on("mousemove",c).on("mouseleave",_);M.on("click",()=>{p||(o(),l()([...i]))}),P(a).addEventListener("keydown",f=>{f.key==="Escape"&&(o(),l()([...i])),(f.ctrlKey||f.metaKey)&&f.key.toLowerCase()==="a"&&(f.preventDefault(),o(),X.each(function(g){const b=y.applyX(I(g.x)),S=y.applyY(C(g.y));b>=0&&b<=r()&&S>=0&&S<=s()&&k(g,this)}),l()([...i]))});function k(f,g){i.has(f)||(i.add(f),q(g).attr("stroke","red").attr("stroke-width",2))}function U(f,g){i.has(f)?F(f,g):k(f,g)}function F(f,g){i.delete(f),q(g).attr("stroke","#000").attr("stroke-width",.5)}function o(){i.clear(),X.attr("stroke","#000").attr("stroke-width",.5)}function w(f,g){clearTimeout(m),ot(u,P(u).style.opacity="1"),ot(u,P(u).innerHTML=`<strong>${g.word}</strong><br/>Count:${g.count}<br/>Cluster:${g.cluster}`),c(f)}function c(f){ot(u,P(u).style.left=f.clientX+12+"px"),ot(u,P(u).style.top=f.clientY+12+"px")}function _(){m=setTimeout(()=>{ot(u,P(u).style.opacity="0")},250)}v=M.append("rect").attr("fill","rgba(0,120,255,0.25)").attr("stroke","#0078ff").attr("display","none").node(),M.on("pointerdown",f=>{f.altKey||(T=[f.offsetX,f.offsetY],p=!1,q(v).attr("x",T[0]).attr("y",T[1]).attr("width",0).attr("height",0).attr("display","block"))}),M.on("pointermove",f=>{if(!T)return;p=!0;const[g,b]=T,S=f.offsetX,D=f.offsetY;q(v).attr("x",Math.min(g,S)).attr("y",Math.min(b,D)).attr("width",Math.abs(S-g)).attr("height",Math.abs(D-b))}),M.on("pointerup",f=>{if(!T)return;const[g,b]=T,S=f.offsetX,D=f.offsetY,K=Math.min(g,S),Y=Math.max(g,S),V=Math.min(b,D),B=Math.max(b,D);X.each(function(O){const L=y.applyX(I(O.x)),J=y.applyY(C(O.y));K<=L&&L<=Y&&V<=J&&J<=B&&k(O,this)}),q(v).attr("display","none"),T=null,l()([...i])})}var d={update_data:N};re();var z=Un(),x=Ae(z);At(x,M=>nt(a,M),()=>P(a));var A=et(x,2);return At(A,M=>nt(u,M),()=>P(u)),ut(t,z),Ce(e,"update_data",N),se(d)}var Gn=lt('<li class="svelte-ks0b0f"> </li>'),Hn=lt('<li class="items_list_element svelte-ks0b0f"><a target="_blank" class="svelte-ks0b0f"> </a></li>'),Qn=lt('<li class="inspection_element svelte-ks0b0f"><h3 class="svelte-ks0b0f"> </h3> <div class="items_list svelte-ks0b0f"></div></li>'),Wn=lt('<div class="main_wrapper svelte-ks0b0f"><div class="scatter_wrapper svelte-ks0b0f"><!></div> <div class="controls_row svelte-ks0b0f"><div class="control_wrapper cw_l svelte-ks0b0f"><h2 class="svelte-ks0b0f">Selection</h2> <ul class="svelte-ks0b0f"></ul></div> <div class="control_wrapper cw_r svelte-ks0b0f"><h2 class="svelte-ks0b0f">Inspection</h2> <ul class="svelte-ks0b0f"></ul></div></div></div>');function fr(t,e){ue(e,!1);let n={},r=Z(),s=Z(""),l=Z("IIIF SOTA");a();function a(){if(P(s)!=""){let z=P(s).split("/data/iiif-sota/")[1].split("-embeddings.json")[0].split("_"),x="";z.forEach(A=>{x=x+A.toUpperCase()+" "}),nt(l,"IIIF SOTA | "+String(x))}}ie(async()=>{n=Oe(),console.log("Params:",n),n.plot&&(nt(s,n.plot),await P(r).update_data(P(s)),a())});let u=Z([]);async function h(d){nt(u,d),console.log("Selected points:",d)}re();var i=Wn();Pe("ks0b0f",d=>{Ie(()=>{De.title=P(l)??""})});var y=G(i),m=G(y);At(Bn(m,{get dataUrl(){return P(s)},onSelect:h,$$legacy:!0}),d=>nt(r,d),()=>P(r)),j(y);var v=et(y,2),T=G(v),p=et(G(T),2);Tt(p,5,()=>P(u),St,(d,z)=>{var x=Gn(),A=G(x);j(x),bt(()=>kt(A,`- ${P(z).word??""} (count: ${P(z).count??""})`)),ut(d,x)}),j(p),j(T);var N=et(T,2),E=et(G(N),2);Tt(E,5,()=>P(u),St,(d,z)=>{var x=Qn(),A=G(x),M=G(A);j(A);var I=et(A,2);Tt(I,5,()=>P(z).manifest_urls,St,(C,R)=>{var $=Hn(),X=G($),k=G(X,!0);j(X),j($),bt(()=>{Re(X,"href",P(R).url),kt(k,P(R).label)}),ut(C,$)}),j(I),j(x),bt(()=>kt(M,`${P(z).word??""} (${P(z).count??""})`)),ut(d,x)}),j(E),j(N),j(v),j(i),ut(t,i),se()}export{fr as component,cr as universal};
