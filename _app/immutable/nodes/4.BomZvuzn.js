import{f as O,a as U}from"../chunks/BMwnI52z.js";import{i as V}from"../chunks/RunrLW0B.js";import{o as G}from"../chunks/CATnQLml.js";import{a3 as H,a4 as X,u as Y,n as Z,h as ee,c as p,a5 as ae,a6 as te,a7 as re,J as j,K as C,M as oe,E as i,O as N,R as m,P as E,V as f,U as y,Q as P,T as ie}from"../chunks/CViI3cOI.js";import{e as _,s as se}from"../chunks/BwJly6qH.js";import{s as ne,r as z}from"../chunks/DgqKdCh0.js";import{b as le}from"../chunks/DwkIcEGX.js";import{b as ue}from"../chunks/Bi763n4E.js";function q(e,u,o=u){var n=new WeakSet;H(e,"input",async a=>{var t=a?e.defaultValue:e.value;if(t=B(e)?$(t):t,o(t),p!==null&&n.add(p),await X(),t!==(t=u())){var d=e.selectionStart,c=e.selectionEnd,l=e.value.length;if(e.value=t??"",c!==null){var s=e.value.length;d===c&&c===l&&s>l?(e.selectionStart=s,e.selectionEnd=s):(e.selectionStart=d,e.selectionEnd=Math.min(c,s))}}}),(ee&&e.defaultValue!==e.value||Y(u)==null&&e.value)&&(o(B(e)?$(e.value):e.value),p!==null&&n.add(p)),Z(()=>{var a=u();if(e===document.activeElement){var t=ae??p;if(n.has(t))return}B(e)&&a===$(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function B(e){var u=e.type;return u==="number"||u==="range"}function $(e){return e===""?null:+e}function fe(e,u,o){var n=te(e,u);n&&n.set&&(e[u]=o,re(()=>{e[u]=null}))}const ce=!0,ke=Object.freeze(Object.defineProperty({__proto__:null,prerender:ce},Symbol.toStringTag,{value:"Module"}));var de=O('<div><button>Play</button> <button>Pause</button> <button>Stop</button></div> <input type="range" min="0" step="0.001"/> <p> </p> <div><button>Play 1.234s â†’ 2.567s</button></div>',1);function ve(e,u){j(u,!1);let o,n,a,t=y(!1),d=0,c=0,l=y(0),s=y(0);const A=async r=>{M();let v;if(r instanceof File||r instanceof Blob)v=await r.arrayBuffer();else if(typeof r=="string")try{const b=await fetch(r,{mode:"cors"});if(!b.ok)throw new Error(`Fetch failed with status ${b.status}`);v=await b.arrayBuffer()}catch(b){throw console.error("Audio load failed:",b),new Error(`Unable to load audio from URL "${r}". If this is a remote file, ensure the server enables CORS.`)}else throw new Error("load_audio expects a File, Blob, or URL string");return o=new AudioContext,n=await o.decodeAudioData(v),f(s,n.duration),f(l,0),c=0,n};function F(){if(!n)return;let r=Number(c);Number.isFinite(r)||(r=0),a=o.createBufferSource(),a.buffer=n,a.connect(o.destination),a.start(0,r),d=o.currentTime-r,f(t,!0),g()}function w(){a&&(a.stop(),c=i(l),f(t,!1))}function M(){a&&a.stop(),f(t,!1),c=0,f(l,0)}function D(r){w(),f(l,c=Math.min(Math.max(r,0),i(s))),i(t)&&F(i(l))}function I(r,v){w();const b=v-r;a=o.createBufferSource(),a.buffer=n,a.connect(o.destination),a.start(0,r,b),d=o.currentTime-r,f(t,!0),a.onended=()=>{f(t,!1),f(l,v),c=v},g()}function g(){if(i(t)){if(f(l,o.currentTime-d),i(l)>=i(s)){f(l,i(s)),f(t,!1);return}requestAnimationFrame(g)}}var J={load_audio:A};V();var R=de(),x=C(R),k=E(x),S=m(k,2),K=m(S,2);P(x);var h=m(x,2);z(h);var T=m(h,2),Q=E(T);P(T);var L=m(T,2),W=E(L);return P(L),oe((r,v)=>{k.disabled=i(t),S.disabled=!i(t),ne(h,"max",i(s)),se(Q,`Time: ${r??""} / ${v??""} s`)},[()=>i(l).toFixed(3),()=>i(s).toFixed(3)]),_("click",k,F),_("click",S,w),_("click",K,M),q(h,()=>i(l),r=>f(l,r)),_("input",h,r=>D(+r.target.value)),_("click",W,()=>I(1.234,2.567)),U(e,R),fe(u,"load_audio",A),N(J)}var me=O('<!> <br/> <input type="file"/> <br/> <input type="text"/> <button>Load from text</button> <h2>Examples to load:</h2> <p>https://raw.githubusercontent.com/ARVEST-APP/arvest-workshops/refs/heads/main/resources/audio/o-let-me-weep.wav</p> <p>https://upload.wikimedia.org/wikipedia/commons/b/b2/03a_rodzaje_sygnalow_alarmowych.wav</p>',1);function Se(e,u){j(u,!1),G(async()=>{await i(o).load_audio(ue+"/sound/test-audio.wav")});let o=y(),n=y("");V();var a=me(),t=C(a);le(ve(t,{$$legacy:!0}),s=>f(o,s),()=>i(o));var d=m(t,4),c=m(d,4);z(c);var l=m(c,2);ie(6),_("change",d,s=>i(o).load_audio(s.target.files[0])),q(c,()=>i(n),s=>f(n,s)),_("click",l,s=>i(o).load_audio(i(n))),U(e,a),N()}export{Se as component,ke as universal};
